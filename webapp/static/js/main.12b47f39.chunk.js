(this["webpackJsonpfront-test"]=this["webpackJsonpfront-test"]||[]).push([[0],{155:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(9),o=n.n(c),s=n(31),i=(n(95),n(69)),u=n(70),l=n(86),f=n(84),d=n(2),j=function(e){Object(l.a)(n,e);var t=Object(f.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).update=function(){r.setState({time:new Date})},r.state={time:new Date},r}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.interval=setInterval(this.update,9e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){var e=this.state.time.getHours(),t=this.state.time.getMinutes(),n=this.state.time.getSeconds();return Object(d.jsxs)("h4",{className:"text-center",children:[e,":",t<10?"0"+t:t,":",n<10?"0"+n:n]})}}]),n}(a.a.Component),b=n(71),h=n(72),m=n(83),v="SET_LOGGED",g="SET_SERVER_ERROR",x="SET_R",O="ADD_POINT",p="success",y="SET_ENTRIES",k="CLEAR_POINTS",T="REMOVE_POINT",w=n(11),S=n.n(w),N=n(26),C=n(45),E=n.n(C),I=E.a.create({baseURL:"http://127.0.0.1:50680/lab4/api/auth"}),P={doAuth:function(e,t){return Object(N.a)(S.a.mark((function n(){return S.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",I.post("login",{username:e,password:t}));case 1:case"end":return n.stop()}}),n)})))()},doRegister:function(e,t){return Object(N.a)(S.a.mark((function n(){return S.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",I.post("register",{username:e,password:t}));case 1:case"end":return n.stop()}}),n)})))()},doLogout:function(e){return Object(N.a)(S.a.mark((function t(){return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",I.post("logout",{token:e}));case 1:case"end":return t.stop()}}),t)})))()}},R=n(30),_=E.a.create({baseURL:"http://127.0.0.1:50680/lab4/api/point"}),M=function(e,t,n,r){return Object(N.a)(S.a.mark((function a(){return S.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",_.post("check",{x:e,y:t,r:n,token:r}));case 1:case"end":return a.stop()}}),a)})))()},B=function(e){return Object(N.a)(S.a.mark((function t(){return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",_.post("get",{token:e}));case 1:case"end":return t.stop()}}),t)})))()},U=function(e){return Object(N.a)(S.a.mark((function t(){return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",_.post("clear",{token:e}));case 1:case"end":return t.stop()}}),t)})))()},V=function(e,t){return Object(N.a)(S.a.mark((function n(){return S.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",_.post("remove",{token:e,id:t}));case 1:case"end":return n.stop()}}),n)})))()},D=n(85);var L=function(){return function(e){B(localStorage.getItem("token")).then((function(t){var n;200===t.status&&t.data.status===p?e((n=t.data.points,{type:y,value:n})):alert(t.data.message)})).catch((function(e){alert(e)}))}},z=function(){return function(e){U(localStorage.getItem("token")).then((function(t){200===t.status&&t.data.status===p?e({type:k,value:[]}):alert(t.data.message)})).catch((function(e){alert(e)}))}},A=function(e){return function(t,n){V(localStorage.getItem("token"),e).then((function(r){if(200===r.status&&r.data.status===p){var a=n().table.points.slice(),c=a.findIndex((function(t){return t.id===e}));a.splice(c,1),t({type:T,value:a})}else alert(r)})).catch((function(e){return alert(e)}))}};var F=function(e,t){return function(n,r){M(e,t,r().main.r,r().auth.loggedUser).then((function(e){var t;200===e.status&&e.data.status===p?n((t=e.data.last_point,{type:O,value:t})):alert(e.data.message)})).catch((function(e){alert(e)}))}},X=Object(R.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loggedUser:"",serverError:""},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case v:return Object.assign({},e,{loggedUser:t.value});case g:return Object.assign({},e,{serverError:t.value});default:return e}},main:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{xValues:[-2,-1.5,-1,-.5,0,.5,1,1.5,2],y_min:-5,y_max:5,rValues:[-2,-1.5,-1,-.5,0,.5,1,1.5,2],r:1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return Object.assign({},e,{r:t.value});default:return e}},table:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{points:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return{points:[].concat(Object(D.a)(e.points),[t.value])};case y:case k:case T:return{points:t.value};default:return e}}}),Y=n(77),G=Object(R.e)(X,Object(R.d)(Object(R.a)(Y.a)));function J(e){return{type:v,value:e}}function H(e){return{type:g,value:e}}var W=function(e,t){return function(n){P.doAuth(e,t).then((function(e){200===e.status&&e.data.status===p?(localStorage.setItem("token",e.data.key),n(J(e.data.key)),n(L())):n(H(e.data.message))})).catch((function(){n(H("\u0421\u0435\u0440\u0432\u0435\u0440 \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d"))}))}},q=n(15),K=n(175),Q=function(e){return e.message&&Object(d.jsx)(K.a,{className:e.className,variant:"outlined",severity:"error",children:e.message})},Z=n(81),$=n(23),ee=function(e){var t={};return e.login||e.psw?(e.login||(t.errorMessage="\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c."),e.psw||(t.errorMessage="\u041f\u0430\u0440\u043e\u043b\u044c \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c.")):t.errorMessage="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0434\u043b\u044f \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438 \u0432 \u043f\u043e\u043b\u044f \u043d\u0438\u0436\u0435.",t};var te=Object(q.b)((function(e){return{serverError:e.auth.serverError}}),(function(e){return{login:function(t,n){return e(W(t,n))},register:function(t,n){return e(function(e,t){return function(n){P.doRegister(e,t).then((function(r){200===r.status?r.data.status===p?n(W(e,t)):n(H(r.data.message)):n(H("Register failed"))})).catch((function(e){n(H("Server error"))}))}}(t,n))}}}))((function(e){var t=Object(m.a)({initialValues:{login:"",psw:"",reg:!1},validate:ee,onSubmit:function(t){t.reg?e.register(t.login,t.psw):e.login(t.login,t.psw)},validateOnBlur:!1,validateOnChange:!1});return Object(d.jsxs)("div",{children:[Object(d.jsx)(Q,{className:"row mx-auto col-4 my-3",message:t.errors.errorMessage?t.errors.errorMessage:e.serverError?e.serverError:""}),Object(d.jsxs)("form",{className:"row mx-auto col-4",onSubmit:t.handleSubmit,children:[Object(d.jsxs)("span",{children:[Object(d.jsx)("h6",{children:"Login:"}),Object(d.jsx)(b.InputText,{name:"login",onChange:t.handleChange,value:t.values.login})]}),Object(d.jsxs)("span",{className:"py-3",children:[Object(d.jsx)("h6",{children:"Password:"}),Object(d.jsx)(h.Password,{feedback:!1,name:"psw",onChange:t.handleChange,value:t.values.psw})]}),Object(d.jsx)("span",{className:"d-flex justify-content-around",children:Object(d.jsx)($.Button,{type:"submit",children:"\u0412\u043e\u0439\u0442\u0438"})}),Object(d.jsxs)("span",{className:"d-flex mt-3",children:[Object(d.jsx)("label",{className:"me-3",children:"\u041d\u043e\u0432\u044b\u0439 \u0430\u043a\u043a\u0430\u0443\u043d\u0442?"}),Object(d.jsx)(Z.ToggleButton,{className:"p-button-sm",name:"reg",checked:t.values.reg,onChange:t.handleChange})]})]})]})}));function ne(e,t){e.forEach((function(e){!function(e,t){var n=document.getElementById("canvas").getContext("2d");n.beginPath(),n.ellipse(function(e,t){return 0===t?150:e/t*130+150}(e.x,t),function(e,t){return 0===t?150:150-e/t*130}(e.y,t),4,4,1,0,2*Math.PI,!0),n.closePath(),"true"===e.isIn?(n.strokeStyle="#20ff00",n.fillStyle="#20ff00"):(n.strokeStyle="#dc3545",n.fillStyle="#dc3545"),n.fill(),n.stroke()}(e,t)}))}var re=Object(q.b)((function(e){return{r_value:e.main.r,points:e.table.points}}),(function(e){return{checkPoint:function(t,n){return e(F(t,n))}}}))((function(e){return Object(r.useEffect)((function(){!function(e){var t="#2b602b",n=document.getElementById("canvas"),r=n.getContext("2d");r.clearRect(0,0,n.width,n.height),r.beginPath(),r.rect(150,150,130,130),r.closePath(),r.strokeStyle=t,r.fillStyle=t,r.fill(),r.stroke(),r.beginPath(),r.moveTo(150,150),r.arc(150,150,130,Math.PI/2,Math.PI),r.closePath(),r.strokeStyle=t,r.fillStyle=t,r.fill(),r.stroke(),r.beginPath(),r.moveTo(150,150),r.lineTo(150,85),r.lineTo(85,150),r.lineTo(150,150),r.closePath(),r.strokeStyle=t,r.fillStyle=t,r.fill(),r.stroke(),r.beginPath(),r.font="10px Verdana",r.moveTo(150,0),r.lineTo(150,300),r.moveTo(150,0),r.lineTo(145,15),r.moveTo(150,0),r.lineTo(155,15),r.strokeStyle="#000000",r.fillStyle="#000000",r.fillText("Y",160,10),r.moveTo(0,150),r.lineTo(300,150),r.moveTo(300,150),r.lineTo(285,145),r.moveTo(300,150),r.lineTo(285,155),r.fillText("X",290,135),r.moveTo(145,20),r.lineTo(155,20),r.fillText(e,160,20),r.moveTo(145,85),r.lineTo(155,85),r.fillText(e/2,160,78),r.moveTo(145,215),r.lineTo(155,215),r.fillText(-e/2,160,215),r.moveTo(145,280),r.lineTo(155,280),r.fillText(-e,160,280),r.moveTo(20,145),r.lineTo(20,155),r.fillText(-e,20,170),r.moveTo(85,145),r.lineTo(85,155),r.fillText(-e/2,70,170),r.moveTo(215,145),r.lineTo(215,155),r.fillText(e/2,215,170),r.moveTo(280,145),r.lineTo(280,155),r.fillText(e,280,170),r.closePath(),r.strokeStyle="black",r.fillStyle="black",r.stroke()}(e.r_value),ne(e.points,e.r_value)})),Object(d.jsx)("canvas",{id:"canvas",onClick:function(){var t=function(e){var t=document.getElementById("canvas").getBoundingClientRect(),n=t.left,r=t.top,a=window.event,c=a.clientX-n,o=a.clientY-r;return[Math.trunc(e*(c-150)/130*1e4)/1e4,Math.trunc(e*(150-o)/130*1e4)/1e4]}(e.r_value),n=Object(s.a)(t,2),r=n[0],a=n[1];e.checkPoint(r,a)},style:{backgroundColor:"#FFFFFF"},width:"300",height:"300"})})),ae=function(e){return Object(d.jsx)("section",{className:"col-sm-12 col-md-6 col-lg-4 my-3",children:Object(d.jsx)(re,{})})},ce=n(176);var oe=Object(q.b)((function(e){return{xValues:e.main.xValues,y_min:e.main.y_min,y_max:e.main.y_max,rValues:e.main.rValues,r:e.main.r}}),(function(e){return{checkPoint:function(t,n){return e(F(t,n))},setR:function(t){return e({type:x,value:t})},clear:function(){return e(z())}}}))((function(e){var t=Object(r.useState)("check"),n=Object(s.a)(t,2),a=n[0],c=n[1],o=Object(r.useState)(0),i=Object(s.a)(o,2),u=i[0],l=i[1],f=Object(r.useState)(0),j=Object(s.a)(f,2),b=j[0],h=j[1];return Object(d.jsxs)("form",{onSubmit:function(t){return t.preventDefault(),"check"===a&&e.checkPoint(u,b),void("clear"===a&&e.clear())},children:[Object(d.jsxs)("h5",{children:["R: ",e.r]}),Object(d.jsx)(ce.a,{value:e.r,name:"r",id:"r",onChange:function(t,n){return e.setR(n)},max:2,min:-2,step:.5}),Object(d.jsxs)("h5",{children:["X: ",u]}),Object(d.jsx)(ce.a,{value:u,name:"x",onChange:function(e,t){return l(t)},max:2,min:-2,step:.5}),Object(d.jsxs)("h5",{children:["Y: ",b]}),Object(d.jsx)(ce.a,{value:b,name:"y",onChange:function(e,t){return h(t)},max:e.y_max,min:e.y_min,step:.5}),Object(d.jsxs)("div",{className:"pt-3 d-flex justify-content-around",children:[Object(d.jsx)($.Button,{className:"",type:"submit",onClick:function(){return c("check")},children:"\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c"}),Object(d.jsx)($.Button,{type:"clear",onClick:function(){return c("clear")},className:"",children:"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c"})]})]})})),se=function(e){return Object(d.jsx)("section",{className:"col-sm-12 col-md-4 col-lg-3 my-3 py-3",children:Object(d.jsx)(oe,{})})},ie=n(82),ue=n(33);var le=Object(q.b)((function(e){return{points:e.table.points}}),(function(e){return{removePoint:function(t){return e(A(t))}}}))((function(e){return Object(d.jsxs)(ie.DataTable,{value:e.points,className:"p-datatable-gridlines",scrollable:!0,resizableColumns:!0,columnResizeMode:"fit",children:[Object(d.jsx)(ue.Column,{field:"x",header:"X",style:{width:"20%"},className:"text-center"}),Object(d.jsx)(ue.Column,{field:"y",header:"Y",style:{width:"20%"},className:"text-center"}),Object(d.jsx)(ue.Column,{field:"r",header:"R",style:{width:"10%"},className:"text-center"}),Object(d.jsx)(ue.Column,{header:"Result",body:function(e){return"true"===e.isIn?Object(d.jsx)("label",{style:{color:"green",fontSize:"85%"},children:"\u0432\u043d\u0443\u0442\u0440\u0438"}):Object(d.jsx)("label",{style:{color:"red",fontSize:"85%"},children:"\u0441\u043d\u0430\u0440\u0443\u0436\u0438"})},style:{width:"22%"},className:"text-center"}),Object(d.jsx)(ue.Column,{body:function(t){return Object(d.jsx)($.Button,{className:"p-button-rounded p-button-sm",onClick:function(){return n=t.id,void e.removePoint(n);var n},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})},style:{width:"28%"},className:"text-center"})]})}));function fe(){return Object(d.jsx)("section",{className:"col-sm-12 col-md-12 col-lg-5 p-datatable",children:Object(d.jsx)(le,{})})}var de=function(e){return Object(d.jsxs)("div",{className:"row",children:[Object(d.jsx)(ae,{}),Object(d.jsx)(se,{}),Object(d.jsx)(fe,{})]})};var je=Object(q.b)((function(e){return{loggedUser:e.auth.loggedUser}}),(function(e){return{initializeAuth:function(){return e((function(e){var t=localStorage.getItem("token");null!==t&&(e(J(t)),e(L()))}))}}}))((function(e){var t=Object(r.useState)(!1),n=Object(s.a)(t,2),a=n[0],c=n[1];return Object(r.useEffect)((function(){a||(e.initializeAuth(),c(!0))}),[a,e]),""===e.loggedUser?Object(d.jsxs)("div",{className:"container-fluid align-center h-90",children:[Object(d.jsx)(j,{}),Object(d.jsx)("div",{className:"row",children:Object(d.jsx)(te,{})})]}):Object(d.jsx)("div",{className:"container-fluid align-center h-90",children:Object(d.jsx)("div",{className:"row",children:Object(d.jsx)(de,{})})})}));n(148),n(149);var be=Object(q.b)((function(e){return{loggedUser:e.auth.loggedUser}}),(function(e){return{logout:function(){return e((function(e){P.doLogout(localStorage.getItem("token")).then((function(e){})),localStorage.removeItem("token"),e(J(""))}))}}}))((function(e){return Object(d.jsxs)("div",{className:"header d-flex justify-content-between",children:[Object(d.jsx)("h1",{children:"\u041b\u044b\u0449\u0435\u0432 \u0418\u0432\u0430\u043d \u0410\u043d\u0442\u043e\u043d\u043e\u0432\u0438\u0447 P3210 10876"}),Object(d.jsx)("div",{className:"p-1",children:""!==e.loggedUser&&Object(d.jsx)($.Button,{className:"btn-block",onClick:function(){return e.logout()},children:"\u0412\u044b\u0445\u043e\u0434"})})]})}));function he(){return Object(d.jsx)("footer",{className:"mt-auto text-center",children:Object(d.jsx)("h5",{children:"Itmo 2021"})})}n(150),n(151),n(152),n(153);o.a.render(Object(d.jsx)(a.a.StrictMode,{children:Object(d.jsxs)(q.a,{store:G,children:[Object(d.jsx)(be,{}),Object(d.jsx)(je,{}),Object(d.jsx)(he,{})]})}),document.getElementById("root"))}},[[155,1,2]]]);
//# sourceMappingURL=main.12b47f39.chunk.js.map